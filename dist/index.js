'use strict';function __awaiter(e,t,a,s){return new(a||(a=Promise))(function(n,i){function d(e){try{o(s.next(e))}catch(t){i(t)}}function l(e){try{o(s["throw"](e))}catch(t){i(t)}}function o(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(d,l)}o((s=s.apply(e,t||[])).next())})}function __generator(e,a){function s(e){return function(t){return i([e,t])}}function i(t){if(d)throw new TypeError("Generator is already executing.");for(;r;)try{if(d=1,n&&(l=2&t[0]?n["return"]:t[0]?n["throw"]||((l=n["return"])&&l.call(n),0):n.next)&&!(l=l.call(n,t[1])).done)return l;switch((n=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,n=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if((l=r.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){r=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){r.label=t[1];break}if(6===t[0]&&r.label<l[1]){r.label=l[1],l=t;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(t);break}l[2]&&r.ops.pop(),r.trys.pop();continue;}t=a.call(e,r)}catch(a){t=[6,a],n=0}finally{d=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var d,n,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var common=createCommonjsModule(function(e,t){function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var s=t.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(var n in s)a(s,n)&&(e[n]=s[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,a,s,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(a,a+s),n);for(var d=0;d<s;d++)e[n+d]=t[a+d]},flattenChunks:function(e){var t,a,s,n,d,o;for(s=0,t=0,a=e.length;t<a;t++)s+=e[t].length;for(o=new Uint8Array(s),n=0,(t=0,a=e.length);t<a;t++)d=e[t],o.set(d,n),n+=d.length;return o}},i={arraySet:function(e,t,a,s,n){for(var d=0;d<s;d++)e[n+d]=t[a+d]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(s)}),common_1=common.assign,common_2=common.shrinkBuf,common_3=common.setTyped,common_4=common.Buf8,common_5=common.Buf16,common_6=common.Buf32,Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero(e){for(var t=e.length;0<=--t;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=Array(2*D_CODES);zero(static_dtree);var _dist_code=Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=Array(LENGTH_CODES);zero(base_length);var base_dist=Array(D_CODES);zero(base_dist);function StaticTreeDesc(e,t,a,s,n){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=s,this.max_length=n,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return 256>e?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function send_bits(e,t,a){e.bi_valid>Buf_size-a?(e.bi_buf|=65535&t<<e.bi_valid,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=a-Buf_size):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=a)}function send_code(e,t,a){send_bits(e,a[2*t],a[2*t+1])}function bi_reverse(e,t){var a=0;do a|=1&e,e>>>=1,a<<=1;while(0<--t);return a>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var a,s,i,d,l,o,r=t.dyn_tree,_=t.max_code,u=t.stat_desc.static_tree,c=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,b=t.stat_desc.max_length,w=0;for(d=0;d<=MAX_BITS;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<HEAP_SIZE;a++)(s=e.heap[a],d=r[2*r[2*s+1]+1]+1,d>b&&(d=b,w++),r[2*s+1]=d,!(s>_))&&(e.bl_count[d]++,l=0,s>=g&&(l=p[s-g]),o=r[2*s],e.opt_len+=o*(d+l),c&&(e.static_len+=o*(u[2*s+1]+l)));if(0!==w){do{for(d=b-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[b]--,w-=2}while(0<w);for(d=b;0!==d;d--)for(s=e.bl_count[d];0!==s;)(i=e.heap[--a],!(i>_))&&(r[2*i+1]!==d&&(e.opt_len+=(d-r[2*i+1])*r[2*i],r[2*i+1]=d),s--)}}function gen_codes(e,t,a){var s,i,d=Array(MAX_BITS+1),l=0;for(s=1;s<=MAX_BITS;s++)d[s]=l=l+a[s-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=bi_reverse(d[o]++,o))}}function tr_static_init(){var e,t,a,s,i,d=Array(MAX_BITS+1);for(a=0,s=0;s<LENGTH_CODES-1;s++)for(base_length[s]=a,e=0;e<1<<extra_lbits[s];e++)_length_code[a++]=s;for(_length_code[a-1]=s,i=0,s=0;16>s;s++)for(base_dist[s]=i,e=0;e<1<<extra_dbits[s];e++)_dist_code[i++]=s;for(i>>=7;s<D_CODES;s++)for(base_dist[s]=i<<7,e=0;e<1<<extra_dbits[s]-7;e++)_dist_code[256+i++]=s;for(t=0;t<=MAX_BITS;t++)d[t]=0;for(e=0;143>=e;)static_ltree[2*e+1]=8,e++,d[8]++;for(;255>=e;)static_ltree[2*e+1]=9,e++,d[9]++;for(;279>=e;)static_ltree[2*e+1]=7,e++,d[7]++;for(;287>=e;)static_ltree[2*e+1]=8,e++,d[8]++;for(gen_codes(static_ltree,L_CODES+1,d),e=0;e<D_CODES;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc([],extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){8<e.bi_valid?put_short(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,a,s){bi_windup(e),s&&(put_short(e,a),put_short(e,~a)),common.arraySet(e.pending_buf,e.window,t,a,e.pending),e.pending+=a}function smaller(e,t,a,s){var n=2*t,i=2*a;return e[n]<e[i]||e[n]===e[i]&&s[t]<=s[a]}function pqdownheap(e,t,a){for(var s=e.heap[a],n=a<<1;n<=e.heap_len&&(n<e.heap_len&&smaller(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!smaller(t,s,e.heap[n],e.depth));)e.heap[a]=e.heap[n],a=n,n<<=1;e.heap[a]=s}function compress_block(e,t,a){var s,n,i,d,l=0;if(0!==e.last_lit)do s=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0===s?send_code(e,n,t):(i=_length_code[n],send_code(e,i+LITERALS+1,t),d=extra_lbits[i],0!==d&&(n-=base_length[i],send_bits(e,n,d)),s--,i=d_code(s),send_code(e,i,a),d=extra_dbits[i],0!==d&&(s-=base_dist[i],send_bits(e,s,d)));while(l<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var a,s,i,d=t.dyn_tree,l=t.stat_desc.static_tree,o=t.stat_desc.has_stree,r=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,a=0;a<r;a++)0===d[2*a]?d[2*a+1]=0:(e.heap[++e.heap_len]=h=a,e.depth[a]=0);for(;2>e.heap_len;)i=e.heap[++e.heap_len]=2>h?++h:0,d[2*i]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=l[2*i+1]);for(t.max_code=h,a=e.heap_len>>1;1<=a;a--)pqdownheap(e,d,a);i=r;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,d,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,d[2*i]=d[2*a]+d[2*s],e.depth[i]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,d[2*a+1]=d[2*s+1]=i,e.heap[1]=i++,pqdownheap(e,d,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(d,h,e.bl_count)}function scan_tree(e,t,a){var s,i,d=-1,l=t[1],o=0,r=7,h=4;for(0===l&&(r=138,h=3),t[2*(a+1)+1]=65535,s=0;s<=a;s++){if(i=l,l=t[2*(s+1)+1],++o<r&&i===l)continue;else o<h?e.bl_tree[2*i]+=o:0===i?10>=o?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++:(i!==d&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++);o=0,d=i,0===l?(r=138,h=3):i===l?(r=6,h=3):(r=7,h=4)}}function send_tree(e,t,a){var s,i,d=-1,l=t[1],o=0,r=7,h=4;for(0===l&&(r=138,h=3),s=0;s<=a;s++){if(i=l,l=t[2*(s+1)+1],++o<r&&i===l)continue;else if(o<h)do send_code(e,i,e.bl_tree);while(0!=--o);else 0===i?10>=o?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,o-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,o-11,7)):(i!==d&&(send_code(e,i,e.bl_tree),o--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,o-3,2));o=0,d=i,0===l?(r=138,h=3):i===l?(r=6,h=3):(r=7,h=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES-1;3<=t&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,a,s){var n;for(send_bits(e,t-257,5),send_bits(e,a-1,5),send_bits(e,s-4,4),n=0;n<s;n++)send_bits(e,e.bl_tree[2*bl_order[n]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,a-1)}function detect_data_type(e){var t,a=4093624447;for(t=0;31>=t;t++,a>>>=1)if(1&a&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,a,s){send_bits(e,0+(s?1:0),3),copy_block(e,t,a,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,a,s){var n,i,d=0;0<e.level?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),d=build_bl_tree(e),n=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=n&&(n=i)):n=i=a+5,a+4<=n&&-1!==t?_tr_stored_block(e,t,a,s):e.strategy===Z_FIXED||i===n?(send_bits(e,(STATIC_TREES<<1)+(s?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(s?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),s&&bi_windup(e)}function _tr_tally(e,t,a){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[a]+LITERALS+1)]++,e.dyn_dtree[2*d_code(t)]++),e.last_lit===e.lit_bufsize-1}var _tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};function adler32(e,t,a,s){for(var i=0|65535&e,d=0|65535&e>>>16,l=0;0!==a;){l=2e3<a?2e3:a,a-=l;do i=0|i+t[s++],d=0|d+i;while(--l);i%=65521,d%=65521}return 0|(i|d<<16)}var adler32_1=adler32;function makeTable(){for(var e,t=[],a=0;256>a;a++){e=a;for(var s=0;8>s;s++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}var crcTable=makeTable();function crc32(e,t,a,s){e^=-1;for(var n=s;n<s+a;n++)e=e>>>8^crcTable[255&(e^t[n])];return-1^e}var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED$1=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN$1=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=messages[t],t}function rank(e){return(e<<1)-(4<e?9:0)}function zero$1(e){for(var t=e.length;0<=--t;)e[t]=0}function flush_pending(e){var t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out);0===a||(common.arraySet(e.output,t.pending_buf,t.pending_out,a,e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))}function flush_block_only(e,t){trees._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function read_buf(e,t,a,s){var n=e.avail_in;return(n>s&&(n=s),0===n)?0:(e.avail_in-=n,common.arraySet(t,e.input,e.next_in,n,a),1===e.state.wrap?e.adler=adler32_1(e.adler,t,n,a):2===e.state.wrap&&(e.adler=crc32_1(e.adler,t,n,a)),e.next_in+=n,e.total_in+=n,n)}function longest_match(e,t){var a,s,n=e.max_chain_length,i=e.strstart,d=e.prev_length,l=e.nice_match,o=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,r=e.window,h=e.w_mask,_=e.prev,u=e.strstart+MAX_MATCH$1,c=r[i+d-1],p=r[i+d];e.prev_length>=e.good_match&&(n>>=2),l>e.lookahead&&(l=e.lookahead);do{if(a=t,r[a+d]!==p||r[a+d-1]!==c||r[a]!==r[i]||r[++a]!==r[i+1])continue;i+=2,a++;do;while(r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&r[++i]===r[++a]&&i<u);if(s=MAX_MATCH$1-(u-i),i=u-MAX_MATCH$1,s>d){if(e.match_start=t,d=s,s>=l)break;c=r[i+d-1],p=r[i+d]}}while((t=_[t&h])>o&&0!=--n);return d<=e.lookahead?d:e.lookahead}function fill_window(e){var t,a,s,i,d,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-MIN_LOOKAHEAD)){common.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,a=e.hash_size,t=a;do s=e.head[--t],e.head[t]=s>=l?s-l:0;while(--a);a=l,t=a;do s=e.prev[--t],e.prev[t]=s>=l?s-l:0;while(--a);i+=l}if(0===e.strm.avail_in)break;if(a=read_buf(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=a,e.lookahead+e.insert>=MIN_MATCH$1)for(d=e.strstart-e.insert,e.ins_h=e.window[d],e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+MIN_MATCH$1-1])&e.hash_mask,e.prev[d&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=d,d++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH$1)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)}function deflate_stored(e,t){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(1>=e.lookahead){if(fill_window(e),0===e.lookahead&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+a;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE;if(e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.strstart>e.block_start&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_NEED_MORE}function deflate_fast(e,t){for(var a,s;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(a=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,a)),!(e.match_length>=MIN_MATCH$1))s=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(s=trees._tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH$1){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(s&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var a,s,n;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(a=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH$1-1,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,a),5>=e.match_length&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH$1&&4096<e.strstart-e.match_start)&&(e.match_length=MIN_MATCH$1-1)),e.prev_length>=MIN_MATCH$1&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-MIN_MATCH$1,s=trees._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH$1),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH$1-1,e.strstart++,s&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(s=trees._tr_tally(e,0,e.window[e.strstart-1]),s&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}return e.match_available&&(s=trees._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var a,s,n,i,d=e.window;;){if(e.lookahead<=MAX_MATCH$1){if(fill_window(e),e.lookahead<=MAX_MATCH$1&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH$1&&0<e.strstart&&(n=e.strstart-1,s=d[n],s===d[++n]&&s===d[++n]&&s===d[++n])){i=e.strstart+MAX_MATCH$1;do;while(s===d[++n]&&s===d[++n]&&s===d[++n]&&s===d[++n]&&s===d[++n]&&s===d[++n]&&s===d[++n]&&s===d[++n]&&n<i);e.match_length=MAX_MATCH$1-(i-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH$1?(a=trees._tr_tally(e,1,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var a;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH)return BS_NEED_MORE;break}if(e.match_length=0,a=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,a,s,n){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=s,this.func=n}var configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero$1(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH$1-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new common.Buf16(2*HEAP_SIZE$1),this.dyn_dtree=new common.Buf16(2*(2*D_CODES$1+1)),this.bl_tree=new common.Buf16(2*(2*BL_CODES$1+1)),zero$1(this.dyn_ltree),zero$1(this.dyn_dtree),zero$1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new common.Buf16(MAX_BITS$1+1),this.heap=new common.Buf16(2*L_CODES$1+1),zero$1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new common.Buf16(2*L_CODES$1+1),zero$1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=Z_NO_FLUSH,trees._tr_init(t),Z_OK):err(e,Z_STREAM_ERROR)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK&&lm_init(e.state),t}function deflateSetHeader(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,Z_OK):Z_STREAM_ERROR:Z_STREAM_ERROR}function deflateInit2(e,t,a,n,i,d){if(!e)return Z_STREAM_ERROR;var l=1;if(t===Z_DEFAULT_COMPRESSION&&(t=6),0>n?(l=0,n=-n):15<n&&(l=2,n-=16),1>i||i>MAX_MEM_LEVEL||a!==Z_DEFLATED||8>n||15<n||0>t||9<t||0>d||d>Z_FIXED$1)return err(e,Z_STREAM_ERROR);8===n&&(n=9);var o=new DeflateState;return e.state=o,o.strm=e,o.wrap=l,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),o.window=new common.Buf8(2*o.w_size),o.head=new common.Buf16(o.hash_size),o.prev=new common.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new common.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=d,o.method=a,deflateReset(e)}function deflateInit(e,t){return deflateInit2(e,t,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(e,t){var a,n,i,d;if(!e||!e.state||t>Z_BLOCK||0>t)return e?err(e,Z_STREAM_ERROR):Z_STREAM_ERROR;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===FINISH_STATE&&t!==Z_FINISH)return err(e,0===e.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(n.strm=e,a=n.last_flush,n.last_flush=t,n.status===INIT_STATE)if(2===n.wrap)e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead?(put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,255&n.gzhead.time),put_byte(n,255&n.gzhead.time>>8),put_byte(n,255&n.gzhead.time>>16),put_byte(n,255&n.gzhead.time>>24),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||2>n.level?4:0),put_byte(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,255&n.gzhead.extra.length),put_byte(n,255&n.gzhead.extra.length>>8)),n.gzhead.hcrc&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE):(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||2>n.level?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE);else{var l=Z_DEFLATED+(n.w_bits-8<<4)<<8,o=-1;o=n.strategy>=Z_HUFFMAN_ONLY||2>n.level?0:6>n.level?1:6===n.level?2:3,l|=o<<6,0!==n.strstart&&(l|=PRESET_DICT),l+=31-l%31,n.status=BUSY_STATE,putShortMSB(n,l),0!==n.strstart&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),e.adler=1}if(n.status===EXTRA_STATE)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending===n.pending_buf_size));)put_byte(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=NAME_STATE)}else n.status=NAME_STATE;if(n.status===NAME_STATE)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending===n.pending_buf_size)){d=1;break}d=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,put_byte(n,d)}while(0!==d);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),0===d&&(n.gzindex=0,n.status=COMMENT_STATE)}else n.status=COMMENT_STATE;if(n.status===COMMENT_STATE)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),i=n.pending,n.pending===n.pending_buf_size)){d=1;break}d=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,put_byte(n,d)}while(0!==d);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),0===d&&(n.status=HCRC_STATE)}else n.status=HCRC_STATE;if(n.status===HCRC_STATE&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&flush_pending(e),n.pending+2<=n.pending_buf_size&&(put_byte(n,255&e.adler),put_byte(n,255&e.adler>>8),e.adler=0,n.status=BUSY_STATE)):n.status=BUSY_STATE),0!==n.pending){if(flush_pending(e),0===e.avail_out)return n.last_flush=-1,Z_OK;}else if(0===e.avail_in&&rank(t)<=rank(a)&&t!==Z_FINISH)return err(e,Z_BUF_ERROR);if(n.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR);if(0!==e.avail_in||0!==n.lookahead||t!==Z_NO_FLUSH&&n.status!==FINISH_STATE){var r=n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,t):n.strategy===Z_RLE?deflate_rle(n,t):configuration_table[n.level].func(n,t);if((r===BS_FINISH_STARTED||r===BS_FINISH_DONE)&&(n.status=FINISH_STATE),r===BS_NEED_MORE||r===BS_FINISH_STARTED)return 0===e.avail_out&&(n.last_flush=-1),Z_OK;if(r===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?trees._tr_align(n):t!==Z_BLOCK&&(trees._tr_stored_block(n,0,0,!1),t===Z_FULL_FLUSH&&(zero$1(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),0===e.avail_out))return n.last_flush=-1,Z_OK}return t===Z_FINISH?0>=n.wrap?Z_STREAM_END:(2===n.wrap?(put_byte(n,255&e.adler),put_byte(n,255&e.adler>>8),put_byte(n,255&e.adler>>16),put_byte(n,255&e.adler>>24),put_byte(n,255&e.total_in),put_byte(n,255&e.total_in>>8),put_byte(n,255&e.total_in>>16),put_byte(n,255&e.total_in>>24)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),flush_pending(e),0<n.wrap&&(n.wrap=-n.wrap),0===n.pending?Z_STREAM_END:Z_OK):Z_OK}function deflateEnd(e){var t;return e&&e.state?(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE)?err(e,Z_STREAM_ERROR):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}function deflateSetDictionary(e,t){var a,i,d,l,o,r,h,_,u=t.length;if(!e||!e.state)return Z_STREAM_ERROR;if(a=e.state,l=a.wrap,2===l||1===l&&a.status!==INIT_STATE||a.lookahead)return Z_STREAM_ERROR;for(1===l&&(e.adler=adler32_1(e.adler,t,u,0)),a.wrap=0,u>=a.w_size&&(0===l&&(zero$1(a.head),a.strstart=0,a.block_start=0,a.insert=0),_=new common.Buf8(a.w_size),common.arraySet(_,t,u-a.w_size,a.w_size,0),t=_,u=a.w_size),o=e.avail_in,r=e.next_in,h=e.input,e.avail_in=u,e.next_in=0,e.input=t,fill_window(a);a.lookahead>=MIN_MATCH$1;){i=a.strstart,d=a.lookahead-(MIN_MATCH$1-1);do a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+MIN_MATCH$1-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++;while(--d);a.strstart=i,a.lookahead=MIN_MATCH$1-1,fill_window(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=MIN_MATCH$1-1,a.match_available=0,e.next_in=r,e.input=h,e.avail_in=o,a.wrap=l,Z_OK}var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo},STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(e){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new common.Buf8(256),q=0;256>q;q++)_utf8len[q]=252<=q?6:248<=q?5:240<=q?4:224<=q?3:192<=q?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){var t,a,s,n,d,l=e.length,o=0;for(n=0;n<l;n++)a=e.charCodeAt(n),55296==(64512&a)&&n+1<l&&(s=e.charCodeAt(n+1),56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),n++)),o+=128>a?1:2048>a?2:65536>a?3:4;for(t=new common.Buf8(o),d=0,n=0;d<o;n++)a=e.charCodeAt(n),55296==(64512&a)&&n+1<l&&(s=e.charCodeAt(n+1),56320==(64512&s)&&(a=65536+(a-55296<<10)+(s-56320),n++)),128>a?t[d++]=a:2048>a?(t[d++]=192|a>>>6,t[d++]=128|63&a):65536>a?(t[d++]=224|a>>>12,t[d++]=128|63&a>>>6,t[d++]=128|63&a):(t[d++]=240|a>>>18,t[d++]=128|63&a>>>12,t[d++]=128|63&a>>>6,t[d++]=128|63&a);return t};function buf2binstring(e,t){var a=String.fromCharCode;if(65534>t&&(e.subarray&&STR_APPLY_UIA_OK||!e.subarray&&STR_APPLY_OK))return a.apply(null,common.shrinkBuf(e,t));for(var s="",n=0;n<t;n++)s+=a(e[n]);return s}var buf2binstring_1=function(e){return buf2binstring(e,e.length)},binstring2buf=function(e){for(var t=new common.Buf8(e.length),a=0,s=t.length;a<s;a++)t[a]=e.charCodeAt(a);return t},buf2string=function(e,t){var a,s,n,d,l=t||e.length,o=Array(2*l);for(s=0,a=0;a<l;){if(n=e[a++],128>n){o[s++]=n;continue}if(d=_utf8len[n],4<d){o[s++]=65533,a+=d-1;continue}for(n&=2===d?31:3===d?15:7;1<d&&a<l;)n=n<<6|63&e[a++],d--;if(1<d){o[s++]=65533;continue}65536>n?o[s++]=n:(n-=65536,o[s++]=55296|1023&n>>10,o[s++]=56320|1023&n)}return buf2binstring(o,s)},utf8border=function(e,t){var a;for(t=t||e.length,t>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return 0>a?t:0===a?t:a+_utf8len[e[a]]>t?a:t},strings={string2buf:string2buf,buf2binstring:buf2binstring_1,binstring2buf:binstring2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,toString=Object.prototype.toString,Z_NO_FLUSH$1=0,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION$1=-1,Z_DEFAULT_STRATEGY$1=0,Z_DEFLATED$1=8;function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);this.options=common.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var a=deflate_1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(a!==Z_OK$1)throw new Error(messages[a]);if(t.header&&deflate_1.deflateSetHeader(this.strm,t.header),t.dictionary){var s;if(s="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,a=deflate_1.deflateSetDictionary(this.strm,s),a!==Z_OK$1)throw new Error(messages[a]);this._dict_set=!0}}Deflate.prototype.push=function(e,t){var a,s,n=this.strm,i=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?Z_FINISH$1:Z_NO_FLUSH$1,n.input="string"==typeof e?strings.string2buf(e):"[object ArrayBuffer]"===toString.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new common.Buf8(i),n.next_out=0,n.avail_out=i),a=deflate_1.deflate(n,s),a!==Z_STREAM_END$1&&a!==Z_OK$1)return this.onEnd(a),this.ended=!0,!1;(0===n.avail_out||0===n.avail_in&&(s===Z_FINISH$1||s===Z_SYNC_FLUSH))&&("string"===this.options.to?this.onData(strings.buf2binstring(common.shrinkBuf(n.output,n.next_out))):this.onData(common.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&a!==Z_STREAM_END$1);return s===Z_FINISH$1?(a=deflate_1.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Z_OK$1):s!==Z_SYNC_FLUSH||(this.onEnd(Z_OK$1),n.avail_out=0,!0)},Deflate.prototype.onData=function(e){this.chunks.push(e)},Deflate.prototype.onEnd=function(e){e===Z_OK$1&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function deflate$1(e,t){var a=new Deflate(t);if(a.push(e,!0),a.err)throw a.msg||messages[a.err];return a.result}function deflateRaw(e,t){return t=t||{},t.raw=!0,deflate$1(e,t)}function gzip(e,t){return t=t||{},t.gzip=!0,deflate$1(e,t)}var Deflate_1=Deflate,deflate_2$1=deflate$1,deflateRaw_1=deflateRaw,gzip_1=gzip,deflate_1$1={Deflate:Deflate_1,deflate:deflate_2$1,deflateRaw:deflateRaw_1,gzip:gzip_1},BAD=30,TYPE=12,inffast=function(e,t){var a,s,n,i,d,l,o,r,h,_,u,c,p,g,m,f,b,w,v,y,k,x,z,B,S;a=e.state,s=e.next_in,B=e.input,n=s+(e.avail_in-5),i=e.next_out,S=e.output,d=i-(t-e.avail_out),l=i+(e.avail_out-257),o=a.dmax,r=a.wsize,h=a.whave,_=a.wnext,u=a.window,c=a.hold,p=a.bits,g=a.lencode,m=a.distcode,f=(1<<a.lenbits)-1,b=(1<<a.distbits)-1;top:do{15>p&&(c+=B[s++]<<p,p+=8,c+=B[s++]<<p,p+=8),w=g[c&f];dolen:for(;;){if(v=w>>>24,c>>>=v,p-=v,v=255&w>>>16,0===v)S[i++]=65535&w;else if(16&v){y=65535&w,v&=15,v&&(p<v&&(c+=B[s++]<<p,p+=8),y+=c&(1<<v)-1,c>>>=v,p-=v),15>p&&(c+=B[s++]<<p,p+=8,c+=B[s++]<<p,p+=8),w=m[c&b];dodist:for(;;){if(v=w>>>24,c>>>=v,p-=v,v=255&w>>>16,16&v){if(k=65535&w,v&=15,p<v&&(c+=B[s++]<<p,p+=8,p<v&&(c+=B[s++]<<p,p+=8)),k+=c&(1<<v)-1,k>o){e.msg="invalid distance too far back",a.mode=BAD;break top}if(c>>>=v,p-=v,v=i-d,k>v){if(v=k-v,v>h&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break top}if(x=0,z=u,0===_){if(x+=r-v,v<y){y-=v;do S[i++]=u[x++];while(--v);x=i-k,z=S}}else if(_<v){if(x+=r+_-v,v-=_,v<y){y-=v;do S[i++]=u[x++];while(--v);if(x=0,_<y){v=_,y-=v;do S[i++]=u[x++];while(--v);x=i-k,z=S}}}else if(x+=_-v,v<y){y-=v;do S[i++]=u[x++];while(--v);x=i-k,z=S}for(;2<y;)S[i++]=z[x++],S[i++]=z[x++],S[i++]=z[x++],y-=3;y&&(S[i++]=z[x++],1<y&&(S[i++]=z[x++]))}else{x=i-k;do S[i++]=S[x++],S[i++]=S[x++],S[i++]=S[x++],y-=3;while(2<y);y&&(S[i++]=S[x++],1<y&&(S[i++]=S[x++]))}}else if(0==(64&v)){w=m[(65535&w)+(c&(1<<v)-1)];continue dodist}else{e.msg="invalid distance code",a.mode=BAD;break top}break}}else if(0==(64&v)){w=g[(65535&w)+(c&(1<<v)-1)];continue dolen}else if(32&v){a.mode=TYPE;break top}else{e.msg="invalid literal/length code",a.mode=BAD;break top}break}}while(s<n&&i<l);return y=p>>3,s-=y,p-=y<<3,c&=(1<<p)-1,e.next_in=s,e.next_out=i,e.avail_in=s<n?5+(n-s):5-(s-n),e.avail_out=i<l?257+(l-i):257-(i-l),a.hold=c,void(a.bits=p)},MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function(e,t,a,s,n,i,d,l){var o,r,h,_,u,c,p,g,m,f=l.bits,b=0,w=0,v=0,y=0,k=0,x=0,z=0,B=0,S=0,E=0,C=null,Z=0,R=new common.Buf16(MAXBITS+1),A=new common.Buf16(MAXBITS+1),N=null,D=0;for(b=0;b<=MAXBITS;b++)R[b]=0;for(w=0;w<s;w++)R[t[a+w]]++;for(k=f,y=MAXBITS;1<=y&&0===R[y];y--);if(k>y&&(k=y),0===y)return n[i++]=20971520,n[i++]=20971520,l.bits=1,0;for(v=1;v<y&&0===R[v];v++);for(k<v&&(k=v),B=1,b=1;b<=MAXBITS;b++)if(B<<=1,B-=R[b],0>B)return-1;if(0<B&&(e===CODES||1!==y))return-1;for(A[1]=0,b=1;b<MAXBITS;b++)A[b+1]=A[b]+R[b];for(w=0;w<s;w++)0!==t[a+w]&&(d[A[t[a+w]]++]=w);if(e===CODES?(C=N=d,c=19):e===LENS?(C=lbase,Z-=257,N=lext,D-=257,c=256):(C=dbase,N=dext,c=-1),E=0,w=0,b=v,u=i,x=k,z=0,h=-1,S=1<<k,_=S-1,e===LENS&&S>ENOUGH_LENS||e===DISTS&&S>ENOUGH_DISTS)return 1;for(;;){p=b-z,d[w]<c?(g=0,m=d[w]):d[w]>c?(g=N[D+d[w]],m=C[Z+d[w]]):(g=96,m=0),o=1<<b-z,r=1<<x,v=r;do r-=o,n[u+(E>>z)+r]=0|(p<<24|g<<16|m);while(0!==r);for(o=1<<b-1;E&o;)o>>=1;if(0===o?E=0:(E&=o-1,E+=o),w++,0==--R[b]){if(b===y)break;b=t[a+d[w]]}if(b>k&&(E&_)!==h){for(0===z&&(z=k),u+=v,x=b-z,B=1<<x;x+z<y&&(B-=R[x+z],!(0>=B));)x++,B<<=1;if(S+=1<<x,e===LENS&&S>ENOUGH_LENS||e===DISTS&&S>ENOUGH_DISTS)return 1;h=E&_,n[h]=0|(k<<24|x<<16|u-i)}}return 0!==E&&(n[u+E]=0|(4194304|b-z<<24)),l.bits=k,0},CODES$1=0,LENS$1=1,DISTS$1=2,Z_FINISH$2=4,Z_BLOCK$1=5,Z_TREES=6,Z_OK$2=0,Z_STREAM_END$2=1,Z_NEED_DICT=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$2=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1;function zswap32(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new common.Buf16(320),this.work=new common.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new common.Buf32(ENOUGH_LENS$1),t.distcode=t.distdyn=new common.Buf32(ENOUGH_DISTS$1),t.sane=1,t.back=-1,Z_OK$2):Z_STREAM_ERROR$1}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR$1}function inflateReset2(e,t){var a,s;return e&&e.state?(s=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?Z_STREAM_ERROR$1:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=a,s.wbits=t,inflateReset(e)):Z_STREAM_ERROR$1}function inflateInit2(e,t){var a,s;return e?(s=new InflateState,e.state=s,s.window=null,a=inflateReset2(e,t),a!==Z_OK$2&&(e.state=null),a):Z_STREAM_ERROR$1}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}var lenfix,distfix,virgin=!0;function fixedtables(e){if(virgin){var t;for(lenfix=new common.Buf32(512),distfix=new common.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(inftrees(LENS$1,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;inftrees(DISTS$1,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,s){var n,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new common.Buf8(i.wsize)),s>=i.wsize?(common.arraySet(i.window,t,a-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>s&&(n=s),common.arraySet(i.window,t,a-s,n,i.wnext),s-=n,s?(common.arraySet(i.window,t,a-s,s,0),i.wnext=s,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0}function inflate(e,t){var s,i,d,l,o,r,h,_,u,c,p,g,m,f,b,w,v,y,k,x,z,B,S,E,a=String.fromCharCode,C=0,Z=new common.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;s=e.state,s.mode===TYPE$1&&(s.mode=TYPEDO),o=e.next_out,d=e.output,h=e.avail_out,l=e.next_in,i=e.input,r=e.avail_in,_=s.hold,u=s.bits,c=r,p=h,B=Z_OK$2;inf_leave:for(;;)switch(s.mode){case HEAD:if(0===s.wrap){s.mode=TYPEDO;break}for(;16>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(2&s.wrap&&35615===_){s.check=0,Z[0]=255&_,Z[1]=255&_>>>8,s.check=crc32_1(s.check,Z,2,0),_=0,u=0,s.mode=FLAGS;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",s.mode=BAD$1;break}if((15&_)!==Z_DEFLATED$2){e.msg="unknown compression method",s.mode=BAD$1;break}if(_>>>=4,u-=4,z=(15&_)+8,0===s.wbits)s.wbits=z;else if(z>s.wbits){e.msg="invalid window size",s.mode=BAD$1;break}s.dmax=1<<z,e.adler=s.check=1,s.mode=512&_?DICTID:TYPE$1,_=0,u=0;break;case FLAGS:for(;16>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(s.flags=_,(255&s.flags)!==Z_DEFLATED$2){e.msg="unknown compression method",s.mode=BAD$1;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=BAD$1;break}s.head&&(s.head.text=1&_>>8),512&s.flags&&(Z[0]=255&_,Z[1]=255&_>>>8,s.check=crc32_1(s.check,Z,2,0)),_=0,u=0,s.mode=TIME;case TIME:for(;32>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.head&&(s.head.time=_),512&s.flags&&(Z[0]=255&_,Z[1]=255&_>>>8,Z[2]=255&_>>>16,Z[3]=255&_>>>24,s.check=crc32_1(s.check,Z,4,0)),_=0,u=0,s.mode=OS;case OS:for(;16>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.head&&(s.head.xflags=255&_,s.head.os=_>>8),512&s.flags&&(Z[0]=255&_,Z[1]=255&_>>>8,s.check=crc32_1(s.check,Z,2,0)),_=0,u=0,s.mode=EXLEN;case EXLEN:if(1024&s.flags){for(;16>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.length=_,s.head&&(s.head.extra_len=_),512&s.flags&&(Z[0]=255&_,Z[1]=255&_>>>8,s.check=crc32_1(s.check,Z,2,0)),_=0,u=0}else s.head&&(s.head.extra=null);s.mode=EXTRA;case EXTRA:if(1024&s.flags&&(g=s.length,g>r&&(g=r),g&&(s.head&&(z=s.head.extra_len-s.length,!s.head.extra&&(s.head.extra=Array(s.head.extra_len)),common.arraySet(s.head.extra,i,l,g,z)),512&s.flags&&(s.check=crc32_1(s.check,i,g,l)),r-=g,l+=g,s.length-=g),s.length))break inf_leave;s.length=0,s.mode=NAME;case NAME:if(2048&s.flags){if(0===r)break inf_leave;g=0;do z=i[l+g++],s.head&&z&&65536>s.length&&(s.head.name+=a(z));while(z&&g<r);if(512&s.flags&&(s.check=crc32_1(s.check,i,g,l)),r-=g,l+=g,z)break inf_leave}else s.head&&(s.head.name=null);s.length=0,s.mode=COMMENT;case COMMENT:if(4096&s.flags){if(0===r)break inf_leave;g=0;do z=i[l+g++],s.head&&z&&65536>s.length&&(s.head.comment+=a(z));while(z&&g<r);if(512&s.flags&&(s.check=crc32_1(s.check,i,g,l)),r-=g,l+=g,z)break inf_leave}else s.head&&(s.head.comment=null);s.mode=HCRC;case HCRC:if(512&s.flags){for(;16>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(_!==(65535&s.check)){e.msg="header crc mismatch",s.mode=BAD$1;break}_=0,u=0}s.head&&(s.head.hcrc=1&s.flags>>9,s.head.done=!0),e.adler=s.check=0,s.mode=TYPE$1;break;case DICTID:for(;32>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}e.adler=s.check=zswap32(_),_=0,u=0,s.mode=DICT;case DICT:if(0===s.havedict)return e.next_out=o,e.avail_out=h,e.next_in=l,e.avail_in=r,s.hold=_,s.bits=u,Z_NEED_DICT;e.adler=s.check=1,s.mode=TYPE$1;case TYPE$1:if(t===Z_BLOCK$1||t===Z_TREES)break inf_leave;case TYPEDO:if(s.last){_>>>=7&u,u-=7&u,s.mode=CHECK;break}for(;3>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}switch(s.last=1&_,_>>>=1,u-=1,3&_){case 0:s.mode=STORED;break;case 1:if(fixedtables(s),s.mode=LEN_,t===Z_TREES){_>>>=2,u-=2;break inf_leave}break;case 2:s.mode=TABLE;break;case 3:e.msg="invalid block type",s.mode=BAD$1;}_>>>=2,u-=2;break;case STORED:for(_>>>=7&u,u-=7&u;32>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if((65535&_)!=(65535^_>>>16)){e.msg="invalid stored block lengths",s.mode=BAD$1;break}if(s.length=65535&_,_=0,u=0,s.mode=COPY_,t===Z_TREES)break inf_leave;case COPY_:s.mode=COPY;case COPY:if(g=s.length,g){if(g>r&&(g=r),g>h&&(g=h),0===g)break inf_leave;common.arraySet(d,i,l,g,o),r-=g,l+=g,h-=g,o+=g,s.length-=g;break}s.mode=TYPE$1;break;case TABLE:for(;14>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(s.nlen=(31&_)+257,_>>>=5,u-=5,s.ndist=(31&_)+1,_>>>=5,u-=5,s.ncode=(15&_)+4,_>>>=4,u-=4,286<s.nlen||30<s.ndist){e.msg="too many length or distance symbols",s.mode=BAD$1;break}s.have=0,s.mode=LENLENS;case LENLENS:for(;s.have<s.ncode;){for(;3>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.lens[R[s.have++]]=7&_,_>>>=3,u-=3}for(;19>s.have;)s.lens[R[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,S={bits:s.lenbits},B=inftrees(CODES$1,s.lens,0,19,s.lencode,0,s.work,S),s.lenbits=S.bits,B){e.msg="invalid code lengths set",s.mode=BAD$1;break}s.have=0,s.mode=CODELENS;case CODELENS:for(;s.have<s.nlen+s.ndist;){for(;;){if(C=s.lencode[_&(1<<s.lenbits)-1],b=C>>>24,w=255&C>>>16,v=65535&C,b<=u)break;if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(16>v)_>>>=b,u-=b,s.lens[s.have++]=v;else{if(16===v){for(E=b+2;u<E;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(_>>>=b,u-=b,0===s.have){e.msg="invalid bit length repeat",s.mode=BAD$1;break}z=s.lens[s.have-1],g=3+(3&_),_>>>=2,u-=2}else if(17===v){for(E=b+3;u<E;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}_>>>=b,u-=b,z=0,g=3+(7&_),_>>>=3,u-=3}else{for(E=b+7;u<E;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}_>>>=b,u-=b,z=0,g=11+(127&_),_>>>=7,u-=7}if(s.have+g>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=BAD$1;break}for(;g--;)s.lens[s.have++]=z}}if(s.mode===BAD$1)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=BAD$1;break}if(s.lenbits=9,S={bits:s.lenbits},B=inftrees(LENS$1,s.lens,0,s.nlen,s.lencode,0,s.work,S),s.lenbits=S.bits,B){e.msg="invalid literal/lengths set",s.mode=BAD$1;break}if(s.distbits=6,s.distcode=s.distdyn,S={bits:s.distbits},B=inftrees(DISTS$1,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,S),s.distbits=S.bits,B){e.msg="invalid distances set",s.mode=BAD$1;break}if(s.mode=LEN_,t===Z_TREES)break inf_leave;case LEN_:s.mode=LEN;case LEN:if(6<=r&&258<=h){e.next_out=o,e.avail_out=h,e.next_in=l,e.avail_in=r,s.hold=_,s.bits=u,inffast(e,p),o=e.next_out,d=e.output,h=e.avail_out,l=e.next_in,i=e.input,r=e.avail_in,_=s.hold,u=s.bits,s.mode===TYPE$1&&(s.back=-1);break}for(s.back=0;;){if(C=s.lencode[_&(1<<s.lenbits)-1],b=C>>>24,w=255&C>>>16,v=65535&C,b<=u)break;if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(w&&0==(240&w)){for(y=b,k=w,x=v;;){if(C=s.lencode[x+((_&(1<<y+k)-1)>>y)],b=C>>>24,w=255&C>>>16,v=65535&C,y+b<=u)break;if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}_>>>=y,u-=y,s.back+=y}if(_>>>=b,u-=b,s.back+=b,s.length=v,0===w){s.mode=LIT;break}if(32&w){s.back=-1,s.mode=TYPE$1;break}if(64&w){e.msg="invalid literal/length code",s.mode=BAD$1;break}s.extra=15&w,s.mode=LENEXT;case LENEXT:if(s.extra){for(E=s.extra;u<E;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.length+=_&(1<<s.extra)-1,_>>>=s.extra,u-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=DIST;case DIST:for(;;){if(C=s.distcode[_&(1<<s.distbits)-1],b=C>>>24,w=255&C>>>16,v=65535&C,b<=u)break;if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(0==(240&w)){for(y=b,k=w,x=v;;){if(C=s.distcode[x+((_&(1<<y+k)-1)>>y)],b=C>>>24,w=255&C>>>16,v=65535&C,y+b<=u)break;if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}_>>>=y,u-=y,s.back+=y}if(_>>>=b,u-=b,s.back+=b,64&w){e.msg="invalid distance code",s.mode=BAD$1;break}s.offset=v,s.extra=15&w,s.mode=DISTEXT;case DISTEXT:if(s.extra){for(E=s.extra;u<E;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}s.offset+=_&(1<<s.extra)-1,_>>>=s.extra,u-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=BAD$1;break}s.mode=MATCH;case MATCH:if(0===h)break inf_leave;if(g=p-h,s.offset>g){if(g=s.offset-g,g>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=BAD$1;break}g>s.wnext?(g-=s.wnext,m=s.wsize-g):m=s.wnext-g,g>s.length&&(g=s.length),f=s.window}else f=d,m=o-s.offset,g=s.length;g>h&&(g=h),h-=g,s.length-=g;do d[o++]=f[m++];while(--g);0===s.length&&(s.mode=LEN);break;case LIT:if(0===h)break inf_leave;d[o++]=s.length,h--,s.mode=LEN;break;case CHECK:if(s.wrap){for(;32>u;){if(0===r)break inf_leave;r--,_|=i[l++]<<u,u+=8}if(p-=h,e.total_out+=p,s.total+=p,p&&(e.adler=s.check=s.flags?crc32_1(s.check,d,p,o-p):adler32_1(s.check,d,p,o-p)),p=h,(s.flags?_:zswap32(_))!==s.check){e.msg="incorrect data check",s.mode=BAD$1;break}_=0,u=0}s.mode=LENGTH;case LENGTH:if(s.wrap&&s.flags){for(;32>u;){if(0===r)break inf_leave;r--,_+=i[l++]<<u,u+=8}if(_!==(4294967295&s.total)){e.msg="incorrect length check",s.mode=BAD$1;break}_=0,u=0}s.mode=DONE;case DONE:B=Z_STREAM_END$2;break inf_leave;case BAD$1:B=Z_DATA_ERROR$1;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1;}if(e.next_out=o,e.avail_out=h,e.next_in=l,e.avail_in=r,s.hold=_,s.bits=u,(s.wsize||p!==e.avail_out&&s.mode<BAD$1&&(s.mode<CHECK||t!==Z_FINISH$2))&&updatewindow(e,e.output,e.next_out,p-e.avail_out));return c-=e.avail_in,p-=e.avail_out,e.total_in+=c,e.total_out+=p,s.total+=p,s.wrap&&p&&(e.adler=s.check=s.flags?crc32_1(s.check,d,p,e.next_out-p):adler32_1(s.check,d,p,e.next_out-p)),e.data_type=s.bits+(s.last?64:0)+(s.mode===TYPE$1?128:0)+(s.mode===LEN_||s.mode===COPY_?256:0),(0===c&&0===p||t===Z_FINISH$2)&&B===Z_OK$2&&(B=Z_BUF_ERROR$1),B}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$2}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap))?Z_STREAM_ERROR$1:(a.head=t,t.done=!1,Z_OK$2):Z_STREAM_ERROR$1}function inflateSetDictionary(e,t){var a,s,n,i=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT)?Z_STREAM_ERROR$1:a.mode===DICT&&(s=1,s=adler32_1(s,t,i,0),s!==a.check)?Z_DATA_ERROR$1:(n=updatewindow(e,t,i,i),n)?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK$2):Z_STREAM_ERROR$1}var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo},constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString$1=Object.prototype.toString;function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);this.options=common.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var a=inflate_1.inflateInit2(this.strm,t.windowBits);if(a!==constants.Z_OK)throw new Error(messages[a]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=inflate_1.inflateSetDictionary(this.strm,t.dictionary),a!==constants.Z_OK)))throw new Error(messages[a])}Inflate.prototype.push=function(e,t){var a,s,n,i,d,l=this.strm,o=this.options.chunkSize,r=this.options.dictionary,h=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?constants.Z_FINISH:constants.Z_NO_FLUSH,l.input="string"==typeof e?strings.binstring2buf(e):"[object ArrayBuffer]"===toString$1.call(e)?new Uint8Array(e):e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new common.Buf8(o),l.next_out=0,l.avail_out=o),a=inflate_1.inflate(l,constants.Z_NO_FLUSH),a===constants.Z_NEED_DICT&&r&&(a=inflate_1.inflateSetDictionary(this.strm,r)),a===constants.Z_BUF_ERROR&&!0===h&&(a=constants.Z_OK,h=!1),a!==constants.Z_STREAM_END&&a!==constants.Z_OK)return this.onEnd(a),this.ended=!0,!1;l.next_out&&(0===l.avail_out||a===constants.Z_STREAM_END||0===l.avail_in&&(s===constants.Z_FINISH||s===constants.Z_SYNC_FLUSH))&&("string"===this.options.to?(n=strings.utf8border(l.output,l.next_out),i=l.next_out-n,d=strings.buf2string(l.output,n),l.next_out=i,l.avail_out=o-i,i&&common.arraySet(l.output,l.output,n,i,0),this.onData(d)):this.onData(common.shrinkBuf(l.output,l.next_out))),0===l.avail_in&&0===l.avail_out&&(h=!0)}while((0<l.avail_in||0===l.avail_out)&&a!==constants.Z_STREAM_END);return a===constants.Z_STREAM_END&&(s=constants.Z_FINISH),s===constants.Z_FINISH?(a=inflate_1.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===constants.Z_OK):s!==constants.Z_SYNC_FLUSH||(this.onEnd(constants.Z_OK),l.avail_out=0,!0)},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===constants.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function inflate$1(e,t){var a=new Inflate(t);if(a.push(e,!0),a.err)throw a.msg||messages[a.err];return a.result}function inflateRaw(e,t){return t=t||{},t.raw=!0,inflate$1(e,t)}var Inflate_1=Inflate,inflate_2$1=inflate$1,inflateRaw_1=inflateRaw,ungzip=inflate$1,inflate_1$1={Inflate:Inflate_1,inflate:inflate_2$1,inflateRaw:inflateRaw_1,ungzip:ungzip},assign=common.assign,pako={};assign(pako,deflate_1$1,inflate_1$1,constants);var pako_1=pako,pako$1=Object.freeze({__proto__:null,default:pako_1,__moduleExports:pako_1}),TGSKit=function(){var t=String.fromCharCode;function e(){this._data={}}return e.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){var t,a,s;return __generator(this,function(n){switch(n.label){case 0:if("string"!=typeof e)return[3,4];if(t=this.parseJSON(e),!1!==t&&(e=t),a=this.parseURL(e),!1===a)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetchPath(a.toString())];case 2:return e=n.sent(),[3,4];case 3:throw s=n.sent(),new Error("Error loading remote resource.");case 4:if("object"==typeof e)return[2,this._data=e];throw new Error("Given resource could not be loaded or is invalid.");}})})},e.prototype.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return!1}},e.prototype.parseURL=function(e){try{return new URL(e)}catch(e){return!1}},e.prototype.generate=function(){this._data.tgs=1,delete this._data.markers,delete this._data.fonts,delete this._data.chars;var e=(void 0)(JSON.stringify(this._data)),t=new Blob([gzip(e, {level: 9})],{type:"application/gzip"});return t},e.prototype.download=function(e){if(void 0===e&&(e="data"),!!document){var t=URL.createObjectURL(this.generate()),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",e+".tgs"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},e.prototype.fetchPath=function(e){return new Promise(function(a,s){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.send(),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status)try{var e=new Uint8Array(n.response).reduce(function(e,a){return e+t(a)},"");return a(JSON.parse(e))}catch(t){try{var e=(void 0)(n.response,{to:"string"});return a(JSON.parse(e))}catch(e){return s(e)}}}})},e.prototype.validate=function(){var e=this,t=[];if(30!=this._data.fr&&60!=this._data.fr&&t.push({message:"Frame rate must be exactly 30 or 60"}),3<(this._data.op-this._data.ip)/this._data.fr&&t.push({message:"Should not be longer than 3 seconds"}),(512!=this._data.w||512!=this._data.h)&&t.push({message:"Dimensions should be exactly 512px x 512px"}),null!=this._data.ddd&&0!=this._data.ddd&&t.push({message:"Should not have 3D layers"}),"markers"in this._data);if("assets"in this._data&&Array.isArray(this._data.assets)){var a=[];this._data.assets.forEach(function(t){if("layers"in t&&Array.isArray(t.layers)){var s=e.checkLayer(t.layers);0!==s.length&&a.push({message:"Asset "+t.id+" has errors",details:s})}}),0!==a.length&&t.push({message:"Assets must not have errors",details:a})}if("layers"in this._data&&Array.isArray(this._data.layers)){var s=[];this._data.layers.forEach(function(t){var a=e.checkLayer(t);0!==a.length&&s.push({message:"Layer \""+t.nm+"\"",details:a})}),0!==s.length&&t.push({message:"Layers have errors",details:s})}else t.push({message:"Should have atleast 1 layer"});return"fonts"in this._data&&Array.isArray(this._data.fonts)&&0<this._data.fonts.length&&t.push({message:"Should not have fonts"}),"chars"in this._data&&Array.isArray(this._data.chars)&&0<this._data.chars.length&&t.push({message:"Should not have glyph chars"}),65536<this.generate().size&&t.push({message:"Total sticker size should not exceed 64 KB"}),t},e.prototype.checkLayer=function(e){var t=[];if(null!=e.ddd&&0!=e.ddd&&t.push({message:"Composition should not include any 3D Layers"}),null!=e.sr&&1!=e.sr&&t.push({message:"Composition should not include any Time Stretching"}),null!=e.tm&&t.push({message:"Composition should not include any Time Remapping"}),1===e.ty&&t.push({message:"Composition should not include any Solids"}),2===e.ty&&t.push({message:"Composition should not include any Images"}),5===e.ty&&t.push({message:"Composition should not include any Texts"}),(!0===e.hasMask||null!=e.masksProperties)&&t.push({message:"Composition should not include any Masks"}),null!=e.tt&&t.push({message:"Composition should not include any Mattes"}),1===e.ao&&t.push({message:"Composition should not include any Auto-Oriented Layers"}),null!=e.ef&&t.push({message:"Composition should not include any Layer Effects"}),"shapes"in e&&Array.isArray(e.shapes)){var a=this.checkItems(e.shapes,!0);0!==a.length&&t.push({message:"Composition shapes should not have errors",details:a})}return t},e.prototype.checkItems=function(e,t){var a=this,s=[];return null!=e&&e.forEach(function(e){if("rp"==e.ty&&s.push({message:"Composition should not include any Repeaters"}),"sr"==e.ty&&s.push({message:"Composition should not include any Star Shapes"}),"mm"==e.ty&&s.push({message:"Composition should not include any Merge Paths"}),"gs"==e.ty&&s.push({message:"Composition should not include any Gradient Strokes"}),!0===t){var n=a.checkItems(e.it,!1);0!==n.length&&s.push({message:"Composition items should not have errors",details:n})}}),s},e}();globalThis.TGSKit=TGSKit;
//# sourceMappingURL=index.js.map
